{"version":3,"sources":["Model.js","App.js","index.js"],"names":["baseUrl","Notification","_ref","notif","type","message","react_default","a","createElement","className","FilterSearch","_ref2","searchField","doSearch","Fragment","value","onChange","AddForm","_ref3","addPerson","newName","setNewName","newNumber","setNewNumber","onSubmit","e","target","PersonList","_ref4","persons","filter","deleteFactory","person","name","toLowerCase","includes","map","key","id","number","onClick","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","setSearchField","_useState9","_useState10","setMessage","fetchAndUpdate","success","failed","err","displayMessage","axios","get","then","response","data","catch","error","setTimeout","useEffect","App_Notification","App_FilterSearch","event","App_AddForm","preventDefault","existingPerson","find","p","window","confirm","concat","newPerson","objectSpread","newObject","put","post","insertPerson","App_PersonList","obj","delete","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.e89f2cb7.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3001/persons'\r\n\r\nconst fetchPersons = (success, failed) => {\r\n  return axios.get(baseUrl).then(response => success(response.data)).catch(error => failed(error))\r\n}\r\n\r\nconst insertPerson = (newObject, success, failed) => {\r\n  return axios.post(baseUrl, newObject).then(response => success(response.data)).catch(error => failed(error))\r\n}\r\n\r\nconst updatePerson = (newObject, success, failed) => {\r\n  return axios.put(`${baseUrl}/${newObject.id}`, newObject).then(response => success(response.data)).catch(error => failed(error))\r\n}\r\n\r\nconst deletePerson = (obj, success, failed) => {\r\n  return axios.delete(`${baseUrl}/${obj.id}`).then(response => success(response.data)).catch(error => failed(error))\r\n}\r\n\r\nexport { fetchPersons, insertPerson, updatePerson, deletePerson }\r\n","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport { fetchPersons, insertPerson, updatePerson, deletePerson } from './Model'\n\nconst Notification = ({ notif }) => {\n  if (notif === null) {\n    return null\n  }\n\n  const { type, message } = notif\n\n  return (\n    <div className={type}>\n      {message}\n    </div>\n  )\n}\n\nconst FilterSearch = ({ searchField, doSearch }) => (\n  <>\n    filter shown with <input value={searchField} onChange={doSearch} />\n  </>\n)\n\nconst AddForm = ({ addPerson, newName, setNewName, newNumber, setNewNumber }) => (\n  <form onSubmit={addPerson}>\n    <div>\n      name: <input value={newName} onChange={(e) => setNewName(e.target.value)} /><br />\n      number: <input value={newNumber} onChange={(e) => setNewNumber(e.target.value)} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n)\n\nconst PersonList = ({ persons, filter, deleteFactory }) => (\n  <>\n    { persons\n      .filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n      .map(person => <p key={person.id}>{person.name}: {person.number} <button type=\"button\" onClick={deleteFactory(person)}>delete</button></p>) }\n  </>\n)\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ searchField, setSearchField ] = useState('')\n  const [ message, setMessage ] = useState(null)\n\n  const fetchAndUpdate = () => {\n    fetchPersons(setPersons, err => displayMessage('message-error', 'Cannot fetch persons'))\n  };\n\n  const displayMessage = (type, message) => {\n    setMessage({type: type, message: message})\n    setTimeout(() => setMessage(null), 5000)\n  }\n\n  const doSearch = event => {\n    setSearchField(event.target.value)\n  }\n\n  const addPerson = event => {\n    event.preventDefault()\n\n    const existingPerson = persons.find(p => p.name === newName);\n    if (existingPerson) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const newPerson = {...existingPerson, number: newNumber}\n        updatePerson(newPerson, data => {\n          setPersons(persons.map(p => p.id === existingPerson.id ? data : p))\n          setNewName('')\n          setNewNumber('')\n          displayMessage('message-success', `Updated ${data.name}`)\n        }, err => {\n          displayMessage('message-error', `${existingPerson.name} was not found`)\n          fetchAndUpdate()\n        })\n      }\n      return\n    }\n\n    const newPerson = {name: newName, number: newNumber}\n    insertPerson(newPerson, data => {\n      setPersons(persons.concat(data))\n      setNewName('')\n      setNewNumber('')\n      displayMessage('message-success', `Added ${data.name}`)\n    }, err => {\n      displayMessage('message-error', `${newPerson.name} could not be added`)\n      fetchAndUpdate()\n    })\n  }\n\n  const deleteFactory = (person) => {\n    return (e) => {\n      if (window.confirm(`Delete ${person.name}?`)) {\n        deletePerson(person, data => {\n          setPersons(persons.filter(p => p.id !== person.id))\n          displayMessage('message-success', `Deleted ${person.name}`)\n        }, err => {\n          displayMessage('message-error', `${person.name} already deleted`)\n          fetchAndUpdate()\n        })\n      }\n    }\n  }\n\n  useEffect(fetchAndUpdate, [])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notif={message} />\n      <FilterSearch searchField={searchField} doSearch={doSearch} />\n      <h3>add a new</h3>\n      <AddForm addPerson={addPerson} newName={newName} setNewName={setNewName} newNumber={newNumber} setNewNumber={setNewNumber} />\n      <h3>Numbers</h3>\n      <PersonList persons={persons} filter={searchField} deleteFactory={deleteFactory} />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}